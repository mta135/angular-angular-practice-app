<!-- <h1 class="text-3xl font-bold underline bg-amber-50">
    Hello world!
</h1> -->


<div class="w-[80%] mx-auto mt-2 rounded-[5px] border border-gray-200 bg-white p-4">

    <div class="w-full p-3 bg-white border border-gray-300 rounded-[5px]">

        <label class="block mb-2 text-sm font-medium text-gray-700">
            Încărcare Document
        </label>

        <div class="flex items-center space-x-4">
            <input type="file" id="file-upload" class="sr-only" (change)="onFileSelected($event)">

            <label for="file-upload"
                class="cursor-pointer rounded-md bg-white px-3.5 py-2.5 text-sm font-medium text-gray-700  ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                Alege fișier
            </label>

            <span class="text-sm text-gray-600">
                {{ selectedFile ? selectedFile.name : 'Niciun fișier selectat' }}
            </span>
        </div>



    </div>

    <hr class="border-t border-gray-300 mt-3 mb-3">


    <div class="panel-container">

        <div class="panel-header">
            <i class="pi pi-envelope"></i>
            <span>Lista emailurilor încărcate</span>
        </div>

        <div class="panel-body">
            <p-table [value]="emailList" showGridlines [scrollable]="true" scrollHeight="500px"
                [resizableColumns]="true" [tableStyle]="{ 'min-width': '50rem' }">
                <ng-template #header>
                    <tr>
                        <th>Nr.</th>
                        <th pResizableColumn>De la</th>
                        <th pResizableColumn>To</th>
                        <th pResizableColumn>Subiect</th>
                        <th pResizableColumn>Header</th>
                        <th pResizableColumn>Corp</th>
                        <th pResizableColumn>Footer</th>
                        <th pResizableColumn>Attachment</th>
                        <th pResizableColumn>Cc</th>
                        <th pResizableColumn>Erori</th>
                        <th pResizableColumn>Status</th>
                    </tr>
                </ng-template>
                <ng-template #body let-email let-i="rowIndex">
                    <tr [ngClass]='myRowClass(email.error, email.status)'>
                        <td>{{ email.rowCount }}</td>
                        <td>{{ email.mailFrom}}</td>
                        <td>{{ email.toRecipients }}</td>
                        <td>{{ email.subject }}</td>
                        <td>{{ email.header }}</td>
                        <td>{{ email.body }}</td>
                        <td>{{ email.footer }}</td>
                        <td>{{ email.attachmentPath }}</td>
                        <td>{{ email.ccRecipients }}</td>
                        <td>{{ email.error }}</td>
                        <td>{{ email.status }}</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>

    </div>

    <hr class="border-t border-gray-300 mt-3 mb-3">

    <div class="flex items-center gap-2 w-full">
        <div>
            <p-button label="Transmite" styleClass="custom-blue" (click)="processEmails()" [disabled]="hasErrors" />
        </div>

        <div>
            <p-button label="Anuleaza" styleClass="custom-blue" (click)="processEmails()" [disabled]="hasErrors" />
        </div>

        <div class="flex justify-end items-center w-full">
            <p-progressBar [value]="50" [showValue]="true" class="myBar w-[100%]" [style]="{'height':'20px'}">>
            </p-progressBar>
        </div>
    </div>

</div>